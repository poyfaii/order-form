<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏î‡∏≠‡∏ô‡πÇ‡∏≠‡∏ó‡∏≠‡∏õ - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            'kanit': ['Kanit', 'sans-serif'],
          },
          colors: {
            honey: {
              50: '#fefce8',
              100: '#fef3c7',
              200: '#fde68a',
              300: '#fcd34d',
              400: '#fbbf24',
              500: '#f59e0b',
              600: '#d97706',
              700: '#b45309',
              800: '#92400e',
              900: '#78350f',
            },
            tropical: {
              50: '#f0fdf4',
              100: '#dcfce7',
              200: '#bbf7d0',
              300: '#86efac',
              400: '#4ade80',
              500: '#22c55e',
              600: '#16a34a',
              700: '#15803d',
              800: '#166534',
              900: '#14532d',
            }
          },
          animation: {
            'float': 'float 6s ease-in-out infinite',
            'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
            'bounce-slow': 'bounce 2s infinite',
            'wiggle': 'wiggle 1s ease-in-out infinite',
            'gradient': 'gradient 15s ease infinite',
            'shimmer': 'shimmer 2s linear infinite',
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0px)' },
              '50%': { transform: 'translateY(-20px)' },
            },
            wiggle: {
              '0%, 100%': { transform: 'rotate(-3deg)' },
              '50%': { transform: 'rotate(3deg)' },
            },
            gradient: {
              '0%, 100%': { backgroundPosition: '0% 50%' },
              '50%': { backgroundPosition: '100% 50%' },
            },
            shimmer: {
              '0%': { transform: 'translateX(-100%)' },
              '100%': { transform: 'translateX(100%)' },
            }
          },
          backgroundSize: {
            '400%': '400% 400%',
          }
        }
      }
    }
  </script>

  <!-- Firebase SDKs -->
    </script>

  <!-- Firebase SDKs -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
    import { getDatabase, ref, push, set, get, child } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCDAaW-OyL_13qkF7sCxXkMhpJyrOtntjg",
      authDomain: "orders-3d979.firebaseapp.com",
      databaseURL: "https://orders-3d979-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "orders-3d979",
      storageBucket: "orders-3d979.appspot.com",
      messagingSenderId: ". ",
      appId: "1:. :web:4f1b772b853b602cc93e94",
      measurementId: "G-P5JPR90CX8"
    };

    const app = initializeApp(firebaseConfig);
    const database = getDatabase(app);

    window.saveOrderToFirebase = async function(order) {
      try {
        const ordersRef = ref(database, 'orders');
        const newOrderRef = push(ordersRef);
        await set(newOrderRef, order);
        return true;
      } catch (error) {
        console.error("Error saving order:", error);
        return false;
      }
    }

    window.getOrdersFromFirebase = async function() {
      try {
        const dbRef = ref(database);
        const snapshot = await get(child(dbRef, 'orders'));
        if (snapshot.exists()) {
          return snapshot.val();
        } else {
          return {};
        }
      } catch (error) {
        console.error("Error getting orders:", error);
        return {};
      }
    }

    window.updateOrderInFirebase = async function(orderId, updatedOrder) {
      try {
        const orderRef = ref(database, `orders/${orderId}`);
        await set(orderRef, updatedOrder);
        return true;
      } catch (error) {
        console.error("Error updating order:", error);
        return false;
      }
    }

    window.deleteOrderFromFirebase = async function(orderId) {
      try {
        const orderRef = ref(database, `orders/${orderId}`);
        await set(orderRef, null);
        return true;
      } catch (error) {
        console.error("Error deleting order:", error);
        return false;
      }
    }
  </script>

  <style>
    * {
      font-family: 'Kanit', sans-serif;
    }
    
    body {
      background: linear-gradient(-45deg, #f8fafc, #f1f5f9, #e2e8f0, #cbd5e1, #94a3b8, #e0f2fe, #b3e5fc);
      background-size: 400% 400%;
      animation: gradient 15s ease infinite;
      min-height: 100vh;
      position: relative;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.03'%3E%3Cpath d='M50 30c11.046 0 20-8.954 20-20s-8.954-20-20-20-20 8.954-20 20 8.954 20 20 20zm0 40c11.046 0 20-8.954 20-20s-8.954-20-20-20-20 8.954-20 20 8.954 20 20 20z'/%3E%3C/g%3E%3C/svg%3E");
      pointer-events: none;
      z-index: 0;
    }
    
    .glass-effect {
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(20px);
      border: 1px solid rgba(255, 255, 255, 0.3);
      box-shadow: 0 25px 45px rgba(0, 0, 0, 0.1);
      position: relative;
      overflow: hidden;
    }
    
    .glass-effect::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
      animation: shimmer 3s infinite;
    }
    
    .premium-card {
      background: linear-gradient(145deg, rgba(255, 255, 255, 0.25), rgba(255, 255, 255, 0.1));
      backdrop-filter: blur(25px);
      border: 2px solid rgba(255, 255, 255, 0.2);
      box-shadow: 
        0 25px 45px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
      position: relative;
      overflow: hidden;
    }
    
    .premium-card::after {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.1), transparent);
      animation: float 8s linear infinite;
      pointer-events: none;
    }
    
    .honey-gradient {
      background: linear-gradient(135deg, #e0f2fe, #b3e5fc, #81d4fa, #4fc3f7);
      background-size: 400% 400%;
      animation: gradient 8s ease infinite;
    }
    
    .tropical-gradient {
      background: linear-gradient(135deg, #e8f5e8, #c8e6c9, #a5d6a7, #81c784);
      background-size: 400% 400%;
      animation: gradient 10s ease infinite;
    }
    
    .card-hover {
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
    }
    
    .card-hover:hover {
      transform: translateY(-8px) scale(1.02);
      box-shadow: 
        0 35px 60px rgba(0, 0, 0, 0.15),
        0 15px 25px rgba(0, 0, 0, 0.1);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #64b5f6, #42a5f5, #2196f3);
      background-size: 200% 200%;
      transition: all 0.4s ease;
      position: relative;
      overflow: hidden;
    }
    
    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.5s;
    }
    
    .btn-primary:hover::before {
      left: 100%;
    }
    
    .btn-primary:hover {
      background-position: 100% 0;
      transform: translateY(-2px) scale(1.05);
      box-shadow: 0 15px 30px rgba(217, 119, 6, 0.4);
    }
    
    .input-modern {
      transition: all 0.4s ease;
      border: 2px solid rgba(255, 255, 255, 0.3);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(10px);
      position: relative;
    }
    
    .input-modern:focus {
      border-color: #f59e0b;
      background: rgba(255, 255, 255, 1);
      box-shadow: 
        0 0 0 4px rgba(245, 158, 11, 0.2),
        0 10px 25px rgba(245, 158, 11, 0.1);
      transform: translateY(-2px);
    }
    
    .status-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 16px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 1px;
      position: relative;
      overflow: hidden;
    }
    
    .status-badge::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: shimmer 2s infinite;
    }
    
    .receipt-watermark {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      color: rgba(0, 0, 0, 0.03);
      font-weight: bold;
      pointer-events: none;
      user-select: none;
      z-index: 0;
      transform: rotate(-45deg);
      white-space: nowrap;
    }
    
    @media (min-width: 768px) {
      .receipt-watermark {
        font-size: 5rem;
      }
    }
    
    .receipt-content {
      position: relative;
      z-index: 1;
    }
    
    @media print {
      body {
        background: white !important;
      }
      .no-print {
        display: none !important;
      }
      .print-only {
        display: block !important;
      }
      #loginBtn, #logoutBtn {
        display: none !important;
      }
    }
    
    .animate-fade-in {
      animation: fadeIn 0.8s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(30px) scale(0.95); }
      to { opacity: 1; transform: translateY(0) scale(1); }
    }

    .floating-elements {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 1;
    }
    
    .floating-banana {
      position: absolute;
      font-size: 2rem;
      opacity: 0.1;
      animation: float 8s ease-in-out infinite;
    }
    
    .floating-banana:nth-child(1) { top: 10%; left: 10%; animation-delay: 0s; }
    .floating-banana:nth-child(2) { top: 20%; right: 15%; animation-delay: 2s; }
    .floating-banana:nth-child(3) { bottom: 30%; left: 20%; animation-delay: 4s; }
    .floating-banana:nth-child(4) { bottom: 10%; right: 10%; animation-delay: 6s; }
    
    .premium-shadow {
      box-shadow: 
        0 20px 40px rgba(0, 0, 0, 0.1),
        0 10px 20px rgba(0, 0, 0, 0.06),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
    }
    
    .neon-glow {
      box-shadow: 
        0 0 20px rgba(245, 158, 11, 0.3),
        0 0 40px rgba(245, 158, 11, 0.2),
        0 0 60px rgba(245, 158, 11, 0.1);
    }
    
    .text-gradient {
      background: linear-gradient(135deg, #f59e0b, #d97706, #22c55e);
      background-size: 200% 200%;
      animation: gradient 5s ease infinite;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    
    .icon-bounce {
      animation: bounce-slow 2s infinite;
    }
    
    .icon-wiggle {
      animation: wiggle 2s ease-in-out infinite;
    }
    
    .pulse-ring {
      position: relative;
    }
    
    .pulse-ring::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 100%;
      height: 100%;
      border: 2px solid rgba(245, 158, 11, 0.3);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      animation: pulse-slow 3s infinite;
    }
  </style>
</head>
<body class="min-h-screen text-gray-800 font-kanit relative">

  <!-- Floating Background Elements -->
  <div class="floating-elements">
    <div class="floating-banana">üçå</div>
    <div class="floating-banana">ü•≠</div>
    <div class="floating-banana">üçä</div>
    <div class="floating-banana">üçå</div>
  </div>

  <!-- Login Button -->
  <div id="loginButtonContainer" class="fixed top-6 right-6 z-50">
    <button id="loginBtn" onclick="showLoginModal()" class="premium-card hover:neon-glow text-gray-800 px-6 py-3 md:px-8 md:py-4 rounded-2xl premium-shadow text-sm font-bold transition-all duration-500 transform hover:scale-110 pulse-ring">
      <span class="text-xl mr-2 md:mr-3 icon-bounce">üîê</span>
      <span class="hidden sm:inline text-gradient">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</span>
      <span class="sm:hidden text-gradient">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</span>
    </button>
    <button id="logoutBtn" onclick="logout()" class="hidden premium-card hover:bg-red-500 hover:bg-opacity-30 text-red-700 px-6 py-3 md:px-8 md:py-4 rounded-2xl premium-shadow text-sm font-bold transition-all duration-500 transform hover:scale-110">
      <span class="text-xl mr-2 md:mr-3 icon-wiggle">üö™</span>
      <span class="hidden sm:inline">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</span>
      <span class="sm:hidden">‡∏≠‡∏≠‡∏Å</span>
    </button>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="hidden fixed inset-0 bg-black bg-opacity-70 backdrop-blur-md flex items-center justify-center z-50 p-4">
    <div class="premium-card p-8 md:p-10 rounded-3xl premium-shadow w-full max-w-md transform transition-all duration-700 animate-fade-in neon-glow">
      <div class="text-center mb-8">
        <div class="honey-gradient w-20 h-20 md:w-24 md:h-24 rounded-full flex items-center justify-center mx-auto mb-6 premium-shadow pulse-ring">
          <span class="text-3xl md:text-4xl icon-bounce">üçå</span>
        </div>
        <h2 class="text-2xl md:text-3xl font-black text-gradient mb-3">‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏î‡∏≠‡∏ô‡πÇ‡∏≠‡∏ó‡∏≠‡∏õ</h2>
        <p class="text-base text-gray-700 font-medium">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤</p>
        <div class="flex justify-center mt-4 space-x-1">
          <div class="w-2 h-2 bg-honey-400 rounded-full animate-pulse"></div>
          <div class="w-2 h-2 bg-honey-500 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
          <div class="w-2 h-2 bg-honey-600 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
        </div>
      </div>
      
      <div class="space-y-6">
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <span class="text-honey-500 text-xl icon-wiggle">üîê</span>
          </div>
          <input id="passwordInput" type="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" class="input-modern w-full pl-12 pr-4 py-4 text-base rounded-2xl focus:outline-none font-medium" onkeypress="handlePasswordKeyPress(event)" />
        </div>
        
        <div class="space-y-4">
          <button onclick="login()" class="btn-primary w-full text-white font-black py-4 text-lg rounded-2xl premium-shadow transform hover:scale-105 transition-all duration-300">
            <span class="text-xl mr-3 icon-bounce">üîì</span>
            ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
          </button>
          <button onclick="hideLoginModal()" class="w-full bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-4 rounded-2xl premium-shadow transition-all duration-300 transform hover:scale-105">
            <span class="text-lg mr-2">‚ùå</span>
            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Main Order Form -->
  <div id="mainOrderForm" class="max-w-5xl mx-auto p-6 space-y-8 relative z-10">
    <!-- Header -->
    <div class="text-center mb-12">
      <div class="relative inline-block mb-8">
        <div class="honey-gradient w-28 h-28 md:w-32 md:h-32 rounded-full flex items-center justify-center premium-shadow pulse-ring animate-float">
          <span class="text-4xl md:text-5xl icon-bounce">üçå</span>
        </div>
        <div class="absolute -top-2 -right-2 w-8 h-8 tropical-gradient rounded-full flex items-center justify-center animate-bounce">
          <span class="text-sm">‚ú®</span>
        </div>
      </div>
      <h1 class="text-4xl md:text-6xl font-black mb-4 text-gradient leading-tight">
        ‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏î‡∏≠‡∏ô‡πÇ‡∏≠‡∏ó‡∏≠‡∏õ
      </h1>
      <p class="text-xl md:text-2xl text-gray-700 font-bold mb-6">‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°</p>
      <div class="flex justify-center items-center space-x-4 mb-6">
        <div class="flex space-x-2">
          <span class="inline-block w-3 h-3 bg-honey-400 rounded-full animate-pulse"></span>
          <span class="inline-block w-3 h-3 bg-honey-500 rounded-full animate-pulse" style="animation-delay: 0.2s"></span>
          <span class="inline-block w-3 h-3 bg-honey-600 rounded-full animate-pulse" style="animation-delay: 0.4s"></span>
        </div>
        <span class="text-2xl icon-wiggle">üõí</span>
        <div class="flex space-x-2">
          <span class="inline-block w-3 h-3 bg-tropical-400 rounded-full animate-pulse" style="animation-delay: 0.6s"></span>
          <span class="inline-block w-3 h-3 bg-tropical-500 rounded-full animate-pulse" style="animation-delay: 0.8s"></span>
          <span class="inline-block w-3 h-3 bg-tropical-600 rounded-full animate-pulse" style="animation-delay: 1s"></span>
        </div>
      </div>
      <div class="premium-card px-8 py-4 rounded-2xl inline-block">
        <p class="text-sm font-bold text-gray-700">üåü ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏° ‚Ä¢ üöö ‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏£‡∏ß‡∏î‡πÄ‡∏£‡πá‡∏ß ‚Ä¢ üíØ ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°</p>
      </div>
    </div>

    <!-- Customer Info Card -->
    <div class="premium-card rounded-3xl premium-shadow p-8 space-y-6 card-hover border-l-8 border-blue-500 neon-glow">
      <div class="flex items-center gap-4 mb-6">
        <div class="w-14 h-14 bg-gradient-to-br from-blue-500 via-purple-600 to-indigo-700 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
          <span class="text-2xl text-white icon-bounce">üë§</span>
        </div>
        <div class="flex-1">
          <h2 class="text-2xl md:text-3xl font-black text-gradient">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
          <p class="text-sm text-gray-600 font-medium">‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</p>
        </div>
        <div class="status-badge bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 border-2 border-blue-200">
          <span class="text-sm">‚≠ê</span> ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="space-y-3">
          <label class="block text-base font-bold text-gray-800 flex items-center gap-2">
            <span class="text-xl icon-wiggle">üë§</span> ‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•
          </label>
          <input id="customerName" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì" />
        </div>
        <div class="space-y-3">
          <label class="block text-base font-bold text-gray-800 flex items-center gap-2">
            <span class="text-xl icon-wiggle">üì±</span> ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå
          </label>
          <input id="customerPhone" type="tel" pattern="[0-9]*" inputmode="numeric" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" oninput="this.value = this.value.replace(/[^0-9]/g, '')" />
        </div>
        <div class="md:col-span-2 space-y-3">
          <label class="block text-base font-bold text-gray-800 flex items-center gap-2">
            <span class="text-xl icon-wiggle">üè†</span> ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á
          </label>
          <textarea id="customerAddress" rows="4" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none resize-none font-medium" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏ö‡∏ö‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà, ‡∏ñ‡∏ô‡∏ô, ‡∏ï‡∏≥‡∏ö‡∏•, ‡∏≠‡∏≥‡πÄ‡∏†‡∏≠, ‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î, ‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå)"></textarea>
        </div>
      </div>
    </div>

    <!-- Add Product Card -->
    <div class="premium-card rounded-3xl premium-shadow p-8 space-y-6 card-hover border-l-8 border-honey-500 neon-glow">
      <div class="flex items-center gap-4 mb-6">
        <div class="w-14 h-14 honey-gradient rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
          <span class="text-2xl text-white icon-bounce">üçå</span>
        </div>
        <div class="flex-1">
          <h2 class="text-2xl md:text-3xl font-black text-gradient">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
          <p class="text-sm text-gray-600 font-medium">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°</p>
        </div>
        <div class="status-badge bg-gradient-to-r from-honey-100 to-amber-100 text-honey-800 border-2 border-honey-200">
          <span class="text-sm">üåü</span> ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û
        </div>
      </div>
      <div class="space-y-6">
        <div class="space-y-3">
          <label class="block text-base font-bold text-gray-800 flex items-center gap-2">
            <span class="text-xl icon-wiggle">üçå</span> ‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
          </label>
          <input id="productName" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏•‡πâ‡∏ß‡∏¢‡∏´‡∏≠‡∏°‡∏≠‡∏≠‡∏£‡πå‡πÅ‡∏Å‡∏ô‡∏¥‡∏Ñ" />
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <div class="space-y-3">
            <label class="block text-base font-bold text-gray-800 flex items-center gap-2">
              <span class="text-xl icon-wiggle">üìè</span> ‡∏Ç‡∏ô‡∏≤‡∏î
            </label>
            <input id="productSize" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="‡πÄ‡∏ä‡πà‡∏ô 500g, 1kg" />
          </div>
          <div class="space-y-3">
            <label class="block text-base font-bold text-gray-800 flex items-center gap-2">
              <span class="text-xl icon-wiggle">üî¢</span> ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô
            </label>
            <input id="productQty" type="number" min="1" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="1" />
          </div>
          <div class="space-y-3">
            <label class="block text-base font-bold text-gray-800 flex items-center gap-2">
              <span class="text-xl icon-wiggle">üí∞</span> ‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)
            </label>
            <input id="productPrice" type="number" min="0" step="0.01" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="0.00" />
          </div>
        </div>
        <button onclick="addItem()" class="btn-primary w-full text-white font-black py-5 text-lg rounded-2xl premium-shadow hover:neon-glow transform hover:scale-105 transition-all duration-500">
          <span class="text-2xl mr-3 icon-bounce">‚ûï</span>
          ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
        </button>
      </div>
    </div>

    <!-- Shopping Cart Card -->
    <div class="premium-card rounded-3xl premium-shadow p-8 space-y-6 card-hover border-l-8 border-indigo-500 neon-glow">
      <div class="flex items-center gap-4 mb-6">
        <div class="w-14 h-14 bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
          <span class="text-2xl text-white icon-bounce">üõí</span>
        </div>
        <div class="flex-1">
          <h2 class="text-2xl md:text-3xl font-black text-gradient">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>
          <p class="text-sm text-gray-600 font-medium">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</p>
        </div>
        <div class="status-badge bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800 border-2 border-indigo-200">
          <span id="cartBadge" class="text-sm font-black">0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
        </div>
      </div>
      <div class="min-h-[250px] bg-gradient-to-br from-gray-50 to-white rounded-2xl p-6 border-2 border-gray-100">
        <ul id="itemList" class="space-y-4"></ul>
      </div>
      <div class="border-t-4 border-gradient-to-r from-honey-400 to-tropical-400 pt-6">
        <div class="honey-gradient p-4 md:p-6 rounded-2xl premium-shadow neon-glow">
          <div class="text-center text-white space-y-3">
            <!-- Mobile Layout -->
            <div class="block md:hidden space-y-4">
              <div class="flex items-center justify-center gap-3 text-base font-black">
                <span class="text-xl icon-bounce">üì¶</span>
                <span>‡∏£‡∏ß‡∏°: <span id="totalQty" class="text-yellow-100 text-xl">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
              </div>
              <div class="flex items-center justify-center gap-3 text-lg font-black">
                <span class="text-2xl icon-bounce">üí∞</span>
                <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="totalPrice" class="text-yellow-100 text-2xl">0.00</span> ‡∏ö‡∏≤‡∏ó</span>
              </div>
            </div>
            
            <!-- Desktop Layout -->
            <div class="hidden md:flex items-center justify-center gap-8 text-lg md:text-xl font-black">
              <div class="flex items-center gap-3">
                <span class="text-2xl icon-bounce">üì¶</span>
                <span>‡∏£‡∏ß‡∏°: <span id="totalQty" class="text-yellow-100 text-2xl">0</span> ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
              </div>
              <div class="flex items-center gap-3">
                <span class="text-2xl icon-bounce">üí∞</span>
                <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: <span id="totalPrice" class="text-yellow-100 text-2xl">0.00</span> ‡∏ö‡∏≤‡∏ó</span>
              </div>
            </div>
            
            <div class="flex justify-center space-x-2 mt-4">
              <div class="w-2 h-2 bg-yellow-200 rounded-full animate-pulse"></div>
              <div class="w-2 h-2 bg-yellow-300 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
              <div class="w-2 h-2 bg-yellow-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Order Search Card -->
    <div class="premium-card rounded-3xl premium-shadow p-8 space-y-6 card-hover border-l-8 border-orange-500 neon-glow">
      <div class="text-center mb-8">
        <div class="w-20 h-20 bg-gradient-to-br from-orange-500 via-pink-500 to-red-500 rounded-full flex items-center justify-center mx-auto mb-6 premium-shadow pulse-ring">
          <span class="text-3xl text-white icon-bounce">üîç</span>
        </div>
        <h2 class="text-2xl md:text-3xl font-black text-gradient mb-3">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå</h2>
        <p class="text-base text-gray-700 font-medium">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå</p>
        <div class="flex justify-center mt-4 space-x-1">
          <div class="w-2 h-2 bg-orange-400 rounded-full animate-pulse"></div>
          <div class="w-2 h-2 bg-pink-400 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
          <div class="w-2 h-2 bg-red-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
        </div>
      </div>
      
      <div class="space-y-6">
        <div class="relative">
          <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
            <span class="text-orange-500 text-xl icon-wiggle">üîç</span>
          </div>
          <input id="searchInput" class="input-modern w-full pl-12 pr-4 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="‡∏û‡∏¥‡∏°‡∏û‡πå‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠ ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" onkeypress="handleSearchKeyPress(event)" />
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <button onclick="searchOrders()" class="bg-gradient-to-r from-orange-500 via-pink-500 to-red-500 hover:from-orange-600 hover:via-pink-600 hover:to-red-600 text-white font-black py-4 text-lg rounded-2xl premium-shadow transition-all duration-500 transform hover:scale-105 hover:neon-glow">
            <span class="text-xl mr-3 icon-bounce">üîç</span>
            ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå
          </button>
          
          <button onclick="clearSearch()" class="bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-bold py-4 text-lg rounded-2xl premium-shadow transition-all duration-500 transform hover:scale-105">
            <span class="text-xl mr-3 icon-wiggle">üóëÔ∏è</span>
            ‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
          </button>
        </div>
      </div>
      
      <!-- Search Results -->
      <div id="searchResults" class="hidden mt-8">
        <div class="border-t-4 border-gradient-to-r from-orange-400 to-pink-400 pt-8">
          <div class="flex items-center justify-center gap-4 mb-6">
            <div class="w-10 h-10 bg-gradient-to-r from-orange-500 to-pink-500 rounded-full flex items-center justify-center premium-shadow">
              <span class="text-lg text-white icon-bounce">üìã</span>
            </div>
            <h3 class="text-xl font-black text-gradient">‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤</h3>
            <span id="searchCount" class="status-badge bg-gradient-to-r from-orange-100 to-pink-100 text-orange-800 border-2 border-orange-200"></span>
          </div>
          <div id="searchResultsList" class="space-y-4"></div>
        </div>
      </div>
    </div>

    <!-- Action Buttons Card -->
    <div class="premium-card rounded-3xl premium-shadow p-8 space-y-6 card-hover border-l-8 border-purple-500 neon-glow">
      <div class="flex items-center gap-4 mb-6">
        <div class="w-14 h-14 bg-gradient-to-br from-purple-500 via-pink-600 to-indigo-600 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
          <span class="text-2xl text-white icon-bounce">‚ö°</span>
        </div>
        <div class="flex-1">
          <h2 class="text-2xl md:text-3xl font-black text-gradient">‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</h2>
          <p class="text-sm text-gray-600 font-medium">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à</p>
        </div>
        <div class="status-badge bg-gradient-to-r from-purple-100 to-pink-100 text-purple-800 border-2 border-purple-200">
          <span class="text-sm">üöÄ</span> ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <button onclick="console.log('Receipt button clicked'); confirmGenerateReceipt()" class="bg-gradient-to-r from-blue-400 via-blue-500 to-blue-600 hover:from-blue-500 hover:via-blue-600 hover:to-blue-700 text-white font-black py-5 px-6 text-lg rounded-2xl premium-shadow transition-all duration-500 transform hover:scale-105 hover:neon-glow">
          <span class="text-2xl mr-3 icon-bounce">üìÑ</span>
          ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
        </button>
        <button onclick="console.log('Save button clicked'); confirmSaveOrder()" class="bg-gradient-to-r from-green-400 via-green-500 to-green-600 hover:from-green-500 hover:via-green-600 hover:to-green-700 text-white font-black py-5 px-6 text-lg rounded-2xl premium-shadow transition-all duration-500 transform hover:scale-105 hover:neon-glow">
          <span class="text-2xl mr-3 icon-bounce">üíæ</span>
          ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå
        </button>
      </div>
    </div>

    <!-- Status Message -->
    <div id="statusMessage" class="hidden premium-card p-6 rounded-2xl text-center font-bold text-lg premium-shadow neon-glow"></div>
  </div>

  <!-- Admin Dashboard -->
  <div id="adminDashboard" class="hidden min-h-screen">
    <!-- Header -->
    <div class="bg-white shadow-lg border-b-2 border-honey-400 sticky top-0 z-40">
      <div class="max-w-6xl mx-auto px-4 py-4">
        <div class="flex flex-col sm:flex-row justify-between items-center gap-4">
          <div class="flex items-center gap-3">
            <div class="w-12 h-12 honey-gradient rounded-xl flex items-center justify-center shadow-lg">
              <span class="text-2xl">üçå</span>
            </div>
            <div>
              <h1 class="text-2xl md:text-3xl font-extrabold bg-gradient-to-r from-honey-600 via-amber-600 to-honey-700 bg-clip-text text-transparent">
                ‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏î‡∏≠‡∏ô‡πÇ‡∏≠‡∏ó‡∏≠‡∏õ
              </h1>
              <p class="text-sm text-gray-600">‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå üë®‚Äçüíº</p>
            </div>
          </div>
          
          <div class="flex items-center gap-3">
            <div class="text-center sm:text-right">
              <p class="text-xs text-gray-500">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</p>
              <p class="text-sm font-semibold text-gray-700" id="lastUpdate">-</p>
            </div>
            <button onclick="refreshOrders()" class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-4 py-2 md:px-6 md:py-3 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 font-bold text-sm md:text-base">
              <span class="text-lg mr-1 md:mr-2">üîÑ</span>
              <span class="hidden sm:inline">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
              <span class="sm:hidden">‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="max-w-6xl mx-auto px-4 py-6 space-y-6">
      <!-- Statistics Cards -->
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-6">
        <div class="premium-card bg-gradient-to-br from-green-400 via-emerald-500 to-teal-600 rounded-3xl premium-shadow p-6 text-white card-hover neon-glow border-l-8 border-green-300">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
              <span class="text-2xl icon-bounce">üí∞</span>
            </div>
            <div class="text-right">
              <p class="text-green-100 text-sm font-bold">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏£‡∏ß‡∏°</p>
              <p class="text-xl md:text-2xl font-black" id="totalRevenue">0 ‡∏ö‡∏≤‡∏ó</p>
              <div class="flex justify-end space-x-1 mt-1">
                <div class="w-1 h-1 bg-green-200 rounded-full animate-pulse"></div>
                <div class="w-1 h-1 bg-green-300 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                <div class="w-1 h-1 bg-green-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
              </div>
            </div>
          </div>
          <div class="bg-white bg-opacity-10 rounded-xl p-2 text-center">
            <span class="text-xs font-bold text-green-100">üìà ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ</span>
          </div>
        </div>

        <div class="premium-card bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-600 rounded-3xl premium-shadow p-6 text-white card-hover neon-glow border-l-8 border-blue-300">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
              <span class="text-2xl icon-bounce">üì¶</span>
            </div>
            <div class="text-right">
              <p class="text-blue-100 text-sm font-bold">‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
              <p class="text-xl md:text-2xl font-black" id="totalOrders">0</p>
              <div class="flex justify-end space-x-1 mt-1">
                <div class="w-1 h-1 bg-blue-200 rounded-full animate-pulse"></div>
                <div class="w-1 h-1 bg-blue-300 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                <div class="w-1 h-1 bg-blue-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
              </div>
            </div>
          </div>
          <div class="bg-white bg-opacity-10 rounded-xl p-2 text-center">
            <span class="text-xs font-bold text-blue-100">üìä ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</span>
          </div>
        </div>

        <div class="premium-card bg-gradient-to-br from-purple-400 via-pink-500 to-rose-600 rounded-3xl premium-shadow p-6 text-white card-hover neon-glow border-l-8 border-purple-300">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
              <span class="text-2xl icon-bounce">üìÖ</span>
            </div>
            <div class="text-right">
              <p class="text-purple-100 text-sm font-bold">‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
              <p class="text-xl md:text-2xl font-black" id="todayOrders">0</p>
              <div class="flex justify-end space-x-1 mt-1">
                <div class="w-1 h-1 bg-purple-200 rounded-full animate-pulse"></div>
                <div class="w-1 h-1 bg-purple-300 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                <div class="w-1 h-1 bg-purple-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
              </div>
            </div>
          </div>
          <div class="bg-white bg-opacity-10 rounded-xl p-2 text-center">
            <span class="text-xs font-bold text-purple-100">üóìÔ∏è ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</span>
          </div>
        </div>

        <div class="premium-card bg-gradient-to-br from-orange-400 via-red-500 to-pink-600 rounded-3xl premium-shadow p-6 text-white card-hover neon-glow border-l-8 border-orange-300">
          <div class="flex items-center justify-between mb-4">
            <div class="w-14 h-14 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
              <span class="text-2xl icon-bounce">‚ö°</span>
            </div>
            <div class="text-right">
              <p class="text-orange-100 text-sm font-bold">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
              <p class="text-xl md:text-2xl font-black" id="pendingOrders">0</p>
              <div class="flex justify-end space-x-1 mt-1">
                <div class="w-1 h-1 bg-orange-200 rounded-full animate-pulse"></div>
                <div class="w-1 h-1 bg-orange-300 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                <div class="w-1 h-1 bg-orange-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
              </div>
            </div>
          </div>
          <div class="bg-white bg-opacity-10 rounded-xl p-2 text-center">
            <span class="text-xs font-bold text-orange-100">‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</span>
          </div>
        </div>
      </div>

      <!-- Search and Filter -->
      <div class="premium-card rounded-3xl premium-shadow p-8 card-hover border-l-8 border-indigo-500 neon-glow">
        <div class="flex items-center gap-4 mb-8">
          <div class="w-16 h-16 bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
            <span class="text-2xl text-white icon-bounce">üîç</span>
          </div>
          <div class="flex-1">
            <h2 class="text-2xl md:text-3xl font-black text-gradient">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå</h2>
            <p class="text-base text-gray-700 font-medium">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏î‡πâ‡∏ß‡∏¢‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</p>
          </div>
          <div class="status-badge bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800 border-2 border-indigo-200">
            <span class="text-sm">üéØ</span> ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
          <div class="space-y-2">
            <label class="block text-sm font-bold text-gray-800 flex items-center gap-2">
              <span class="text-lg icon-wiggle">üë§</span> ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
            </label>
            <input id="adminSearchInput" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤..." onkeypress="handleAdminSearchKeyPress(event)" />
          </div>
          <div class="space-y-2">
            <label class="block text-sm font-bold text-gray-800 flex items-center gap-2">
              <span class="text-lg icon-wiggle">üì±</span> ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£
            </label>
            <input id="adminPhoneInput" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£..." onkeypress="handleAdminSearchKeyPress(event)" />
          </div>
          <div class="space-y-2">
            <label class="block text-sm font-bold text-gray-800 flex items-center gap-2">
              <span class="text-lg icon-wiggle">üìä</span> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞
            </label>
            <select id="statusFilter" class="input-modern w-full px-5 py-4 text-base rounded-2xl focus:outline-none font-medium" onchange="filterOrders()">
              <option value="">‡∏ó‡∏∏‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
              <option value="‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
              <option value="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</option>
              <option value="‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß">‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß</option>
              <option value="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</option>
            </select>
          </div>
          <div class="space-y-2">
            <label class="block text-sm font-bold text-gray-800 flex items-center gap-2">
              <span class="text-lg icon-wiggle">üöÄ</span> ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
            </label>
            <button onclick="searchAdminOrders()" class="btn-primary w-full text-white font-black py-4 text-base rounded-2xl premium-shadow hover:neon-glow transform hover:scale-105 transition-all duration-500">
              <span class="text-xl mr-2 icon-bounce">üîç</span>
              ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
            </button>
          </div>
        </div>
      </div>

      <!-- Orders List -->
      <div class="premium-card rounded-3xl premium-shadow overflow-hidden neon-glow">
        <div class="honey-gradient p-8">
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-4">
              <div class="w-16 h-16 bg-white bg-opacity-20 rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
                <span class="text-2xl text-white icon-bounce">üìã</span>
              </div>
              <div>
                <h2 class="text-2xl md:text-3xl font-black text-white">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå</h2>
                <p class="text-honey-100 text-base font-bold">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                <div class="flex space-x-1 mt-2">
                  <div class="w-2 h-2 bg-honey-200 rounded-full animate-pulse"></div>
                  <div class="w-2 h-2 bg-honey-300 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                  <div class="w-2 h-2 bg-honey-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
                </div>
              </div>
            </div>
            <div class="text-right">
              <div class="bg-white bg-opacity-20 rounded-2xl p-4 premium-shadow">
                <p class="text-honey-100 text-sm font-bold">‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á</p>
                <p class="text-2xl font-black text-white" id="displayedOrdersCount">0</p>
                <div class="flex justify-center space-x-1 mt-1">
                  <div class="w-1 h-1 bg-honey-200 rounded-full animate-pulse"></div>
                  <div class="w-1 h-1 bg-honey-300 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
                  <div class="w-1 h-1 bg-honey-400 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="p-8">
          <div id="ordersList" class="space-y-6"></div>
          
          <!-- Empty State -->
          <div id="emptyOrdersState" class="hidden text-center py-16">
            <div class="w-24 h-24 bg-gradient-to-br from-gray-100 to-gray-200 rounded-full flex items-center justify-center mx-auto mb-6 premium-shadow animate-float">
              <span class="text-4xl text-gray-400 icon-bounce">üì¶</span>
            </div>
            <h3 class="text-2xl font-black text-gray-700 mb-4 text-gradient">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
            <p class="text-gray-600 text-base font-medium mb-6">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ ‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà</p>
            <div class="flex justify-center space-x-2">
              <div class="w-3 h-3 bg-gray-400 rounded-full animate-pulse"></div>
              <div class="w-3 h-3 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.2s"></div>
              <div class="w-3 h-3 bg-gray-600 rounded-full animate-pulse" style="animation-delay: 0.4s"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Receipt View -->
  <div id="receiptView" class="hidden min-h-screen bg-gray-50">
    <!-- Receipt Header with Actions -->
    <div class="bg-white shadow-lg border-b sticky top-0 z-40 no-print">
      <div class="max-w-2xl mx-auto px-4 py-4">
        <div class="flex items-center justify-between">
          <button onclick="backToAdmin()" class="flex items-center gap-2 text-gray-600 hover:text-gray-800 transition-colors">
            <span class="text-xl">‚Üê</span>
            <span class="font-medium">‡∏Å‡∏•‡∏±‡∏ö</span>
          </button>
          
          <div class="flex items-center gap-3">
            <button onclick="printReceipt()" class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-4 py-2 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 font-medium text-sm">
              <span class="text-base mr-1">üñ®Ô∏è</span>
              ‡∏û‡∏¥‡∏°‡∏û‡πå
            </button>
            <button onclick="downloadReceiptImage()" class="bg-gradient-to-r from-purple-500 to-purple-600 hover:from-purple-600 hover:to-purple-700 text-white px-4 py-2 rounded-xl shadow-lg transition-all duration-300 transform hover:scale-105 font-medium text-sm">
              <span class="text-base mr-1">üì∏</span>
              ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Receipt Content -->
    <div class="max-w-2xl mx-auto p-4">
      <div id="receiptContent" class="bg-white rounded-2xl shadow-xl overflow-hidden relative">
        <!-- Watermark -->
        <div class="receipt-watermark">‡∏£‡πâ‡∏≤‡∏ô ‡πÅ‡∏°‡πà‡∏î‡∏≠‡∏ô‡πÇ‡∏≠‡∏ó‡∏≠‡∏õ</div>
        
        <div class="receipt-content">
          <!-- Receipt Header -->
          <div class="honey-gradient p-2 text-center text-white">
            <div class="w-6 h-6 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-1">
              <span class="text-sm">üçå</span>
            </div>
            <h1 class="text-sm font-bold mb-1">‡∏£‡πâ‡∏≤‡∏ô‡πÅ‡∏°‡πà‡∏î‡∏≠‡∏ô‡πÇ‡∏≠‡∏ó‡∏≠‡∏õ</h1>
            <p class="text-honey-200 text-xs" id="receiptDate"></p>
          </div>
          
          <!-- Customer Info -->
          <div class="p-6 bg-gray-50 border-b-2 border-gray-100">
            <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
              <span class="text-blue-500 text-xl">üë§</span>
              ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
            </h3>
            <div class="space-y-3 text-sm">
              <div class="flex items-start gap-3">
                <span class="text-gray-500 font-medium min-w-[60px]">‡∏ä‡∏∑‡πà‡∏≠:</span>
                <span id="receiptCustomerName" class="font-semibold text-gray-800"></span>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-gray-500 font-medium min-w-[60px]">‡πÇ‡∏ó‡∏£:</span>
                <span id="receiptCustomerPhone" class="font-semibold text-gray-800"></span>
              </div>
              <div class="flex items-start gap-3">
                <span class="text-gray-500 font-medium min-w-[60px]">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</span>
                <span id="receiptCustomerAddress" class="font-semibold text-gray-800"></span>
              </div>
            </div>
          </div>
          
          <!-- Items Table -->
          <div class="p-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
              <span class="text-honey-500 text-xl">üçå</span>
              ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            </h3>
            <div class="overflow-x-auto">
              <table class="w-full border-collapse">
                <thead>
                  <tr class="bg-gray-800 text-white">
                    <th class="text-left p-3 rounded-tl-lg font-semibold text-sm">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</th>
                    <th class="text-center p-3 font-semibold text-sm">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</th>
                    <th class="text-center p-3 font-semibold text-sm">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢</th>
                    <th class="text-right p-3 rounded-tr-lg font-semibold text-sm">‡∏£‡∏ß‡∏°</th>
                  </tr>
                </thead>
                <tbody id="receiptItems" class="bg-gray-50">
                </tbody>
              </table>
            </div>
          </div>
          
          <!-- Total Section -->
          <div class="p-6 bg-gradient-to-r from-green-50 to-emerald-50 border-t-2 border-green-100">
            <div class="flex justify-between items-center mb-4">
              <span class="text-xl font-bold text-gray-800">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏¥‡πâ‡∏ô:</span>
              <div class="text-right">
                <span id="receiptTotal" class="text-2xl md:text-3xl font-bold text-green-600"></span>
                <span class="text-xl font-bold text-gray-800 ml-2">‡∏ö‡∏≤‡∏ó</span>
              </div>
            </div>
            <div class="flex justify-center">
              <div id="receiptStatus" class="status-badge bg-gradient-to-r from-blue-100 to-indigo-100 text-blue-800 border border-blue-200">
                <span class="text-base">üì¶</span>
                ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£
              </div>
            </div>
          </div>
          
          <!-- Footer -->
          <div class="honey-gradient p-2 text-center text-white">
            <p class="text-honey-200 text-xs">‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏ö‡∏£‡∏¥‡∏Å‡∏≤‡∏£ üôè</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let items = [];
    let orderCounter = 1;
    let isLoggedIn = false;
    let allOrders = {};
    let filteredOrders = {};
    let currentReceiptOrder = null;

    // Login functions
    function showLoginModal() {
      document.getElementById('loginModal').classList.remove('hidden');
      document.getElementById('passwordInput').focus();
    }

    function hideLoginModal() {
      document.getElementById('loginModal').classList.add('hidden');
      document.getElementById('passwordInput').value = '';
    }

    function handlePasswordKeyPress(event) {
      if (event.key === 'Enter') {
        login();
      }
    }

    function login() {
      const password = document.getElementById('passwordInput').value;
      if (password === '1234') {
        isLoggedIn = true;
        hideLoginModal();
        showAdminDashboard();
        loadOrders();
      } else {
        alert('‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
        document.getElementById('passwordInput').value = '';
      }
    }

    function logout() {
      isLoggedIn = false;
      showMainForm();
    }

    function showAdminDashboard() {
      document.getElementById('mainOrderForm').classList.add('hidden');
      document.getElementById('receiptView').classList.add('hidden');
      document.getElementById('adminDashboard').classList.remove('hidden');
      document.getElementById('loginBtn').classList.add('hidden');
      document.getElementById('logoutBtn').classList.remove('hidden');
    }

    function showMainForm() {
      document.getElementById('adminDashboard').classList.add('hidden');
      document.getElementById('receiptView').classList.add('hidden');
      document.getElementById('mainOrderForm').classList.remove('hidden');
      document.getElementById('loginBtn').classList.remove('hidden');
      document.getElementById('logoutBtn').classList.add('hidden');
    }

    function showReceiptView(order) {
      currentReceiptOrder = order;
      document.getElementById('adminDashboard').classList.add('hidden');
      document.getElementById('mainOrderForm').classList.add('hidden');
      document.getElementById('receiptView').classList.remove('hidden');
      
      // Hide login button container when viewing receipt
      document.getElementById('loginButtonContainer').classList.add('hidden');
      
      // Populate receipt data
      document.getElementById('receiptDate').textContent = new Date(order.orderDate).toLocaleString('th-TH');
      document.getElementById('receiptCustomerName').textContent = order.customer?.name || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠';
      document.getElementById('receiptCustomerPhone').textContent = order.customer?.phone || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå';
      document.getElementById('receiptCustomerAddress').textContent = order.customer?.address || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà';

      const receiptItems = document.getElementById('receiptItems');
      receiptItems.innerHTML = order.items?.map(item => `
        <tr class="border-b border-gray-200">
          <td class="p-3 text-sm font-medium">${item.name}${item.size ? ` (${item.size})` : ''}</td>
          <td class="p-3 text-sm text-center">${item.qty}</td>
          <td class="p-3 text-sm text-center">${item.price?.toFixed(2) || '0.00'}</td>
          <td class="p-3 text-sm text-right font-semibold text-green-600">${item.total?.toFixed(2) || '0.00'}</td>
        </tr>
      `).join('') || '<tr><td colspan="4" class="p-6 text-center text-gray-500">‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</td></tr>';

      document.getElementById('receiptTotal').textContent = order.totalAmount?.toFixed(2) || '0.00';
      
      const statusColor = getStatusColor(order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£');
      const statusIcon = getStatusIcon(order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£');
      document.getElementById('receiptStatus').className = `status-badge ${statusColor}`;
      document.getElementById('receiptStatus').innerHTML = `<span class="text-base">${statusIcon}</span> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: ${order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'}`;
    }

    function backToAdmin() {
      // Show login button container when leaving receipt
      document.getElementById('loginButtonContainer').classList.remove('hidden');
      
      if (isLoggedIn) {
        showAdminDashboard();
      } else {
        showMainForm();
      }
    }

    function printReceipt() {
      window.print();
    }

    async function downloadReceiptImage() {
      if (!currentReceiptOrder) return;
      
      showStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û...', 'info');

      try {
        const receiptContent = document.getElementById('receiptContent');
        const canvas = await html2canvas(receiptContent, {
          backgroundColor: '#ffffff',
          scale: 2,
          useCORS: true,
          allowTaint: true
        });

        const link = document.createElement('a');
        link.download = `receipt-${currentReceiptOrder.customer?.name || 'customer'}-${new Date().toISOString().split('T')[0]}.png`;
        link.href = canvas.toDataURL('image/png');
        link.click();

        showStatus('‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
      } catch (error) {
        console.error('Error downloading image:', error);
        showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û', 'error');
      }
    }

    // Order management functions
    async function loadOrders() {
      try {
        allOrders = await window.getOrdersFromFirebase();
        filteredOrders = { ...allOrders };
        displayOrders(filteredOrders);
        calculateStats(allOrders);
      } catch (error) {
        console.error('Error loading orders:', error);
      }
    }

    function displayOrders(orders) {
      const ordersList = document.getElementById('ordersList');
      const emptyState = document.getElementById('emptyOrdersState');
      const displayedCount = document.getElementById('displayedOrdersCount');
      
      if (!orders || Object.keys(orders).length === 0) {
        ordersList.innerHTML = '';
        emptyState.classList.remove('hidden');
        displayedCount.textContent = '0';
        return;
      }

      emptyState.classList.add('hidden');
      const ordersArray = Object.entries(orders).map(([id, order]) => ({
        id,
        ...order
      }));

      ordersArray.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));
      displayedCount.textContent = ordersArray.length;

      ordersList.innerHTML = ordersArray.map(order => {
        const statusColor = getStatusColor(order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£');
        const statusIcon = getStatusIcon(order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£');
        
        return `
          <div class="bg-white border border-gray-200 rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden card-hover">
            <!-- Order Header -->
            <div class="p-4 md:p-6">
              <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-4">
                <!-- Customer Info -->
                <div class="flex items-start gap-4">
                  <div class="w-12 h-12 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-xl flex items-center justify-center shadow-lg flex-shrink-0">
                    <span class="text-xl text-white">üë§</span>
                  </div>
                  <div class="min-w-0 flex-1">
                    <h3 class="text-lg font-bold text-gray-800 mb-1 truncate">${order.customer?.name || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠'}</h3>
                    <div class="space-y-1 text-sm text-gray-600">
                      <div class="flex items-center gap-1">
                        <span>üì±</span>
                        <span class="truncate">${order.customer?.phone || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå'}</span>
                      </div>
                      <div class="flex items-center gap-1">
                        <span>üõí</span>
                        <span>${order.items?.length || 0} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</span>
                      </div>
                      <div class="flex items-center gap-1">
                        <span>üìÖ</span>
                        <span>${new Date(order.orderDate).toLocaleDateString('th-TH')}</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Order Summary -->
                <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
                  <div class="text-center sm:text-right">
                    <p class="text-xs text-gray-500 mb-1">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</p>
                    <p class="text-2xl md:text-3xl font-bold text-green-600">${order.totalAmount?.toFixed(2) || '0.00'}</p>
                    <p class="text-xs text-gray-500">‡∏ö‡∏≤‡∏ó</p>
                  </div>
                  
                  <div class="flex items-center">
                    <span class="px-3 py-1 rounded-full text-xs font-bold ${statusColor} shadow-sm">
                      ${statusIcon} ${order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'}
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Order Actions -->
            <div class="bg-gray-50 border-t border-gray-100 p-4 md:p-6">
              <div class="flex flex-col lg:flex-row items-stretch lg:items-center gap-3">
                <!-- Status Update -->
                <div class="flex items-center gap-2 flex-1">
                  <label class="text-xs font-medium text-gray-700 whitespace-nowrap">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</label>
                  <select id="status-${order.id}" class="flex-1 lg:flex-none lg:w-32 input-modern px-2 py-1 text-xs rounded-lg border-gray-300 focus:border-honey-400">
                    <option value="‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£" ${(order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£') === '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£' ? 'selected' : ''}>‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</option>
                    <option value="‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á" ${order.status === '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á' ? 'selected' : ''}>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</option>
                    <option value="‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß" ${order.status === '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß' ? 'selected' : ''}>‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß</option>
                    <option value="‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å" ${order.status === '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å' ? 'selected' : ''}>‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</option>
                  </select>
                  <button onclick="updateOrderStatus('${order.id}')" class="bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white px-3 py-1 rounded-lg text-xs font-semibold transition-all duration-200 transform hover:scale-105 shadow-lg whitespace-nowrap">
                    üíæ
                  </button>
                </div>

                <!-- Action Buttons -->
                <div class="flex items-center gap-2 flex-wrap">
                  <button onclick="showReceiptView(${JSON.stringify(order).replace(/"/g, '&quot;')})" class="bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-3 py-1 rounded-lg text-xs font-semibold transition-all duration-200 transform hover:scale-105 shadow-lg">
                    üìÑ ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à
                  </button>
                  <button onclick="deleteOrder('${order.id}')" class="bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-3 py-1 rounded-lg text-xs font-semibold transition-all duration-200 transform hover:scale-105 shadow-lg">
                    üóëÔ∏è ‡∏•‡∏ö
                  </button>
                </div>
              </div>
            </div>
          </div>
        `;
      }).join('');
    }

    function getStatusColor(status) {
      switch(status) {
        case '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£': return 'bg-yellow-100 text-yellow-800 border-yellow-200';
        case '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á': return 'bg-blue-100 text-blue-800 border-blue-200';
        case '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß': return 'bg-green-100 text-green-800 border-green-200';
        case '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å': return 'bg-red-100 text-red-800 border-red-200';
        default: return 'bg-gray-100 text-gray-800 border-gray-200';
      }
    }

    function getStatusIcon(status) {
      switch(status) {
        case '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£': return '‚è≥';
        case '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏à‡∏±‡∏î‡∏™‡πà‡∏á': return 'üöö';
        case '‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß': return '‚úÖ';
        case '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å': return '‚ùå';
        default: return 'üì¶';
      }
    }

    async function updateOrderStatus(orderId) {
      const newStatus = document.getElementById(`status-${orderId}`).value;
      
      showStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞...', 'info');

      try {
        const orders = await window.getOrdersFromFirebase();
        const currentOrder = orders[orderId];
        
        if (!currentOrder) {
          showStatus('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå', 'error');
          return;
        }

        const updatedOrder = {
          ...currentOrder,
          status: newStatus,
          lastModified: new Date().toISOString()
        };

        const success = await window.updateOrderInFirebase(orderId, updatedOrder);
        if (success) {
          loadOrders();
          showStatus(`‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô "${newStatus}" ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß`, 'success');
        } else {
          showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞', 'error');
        }
      } catch (error) {
        showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
      }
    }

    async function deleteOrder(orderId) {
      if (!confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
        return;
      }

      showStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå...', 'info');

      try {
        const success = await window.deleteOrderFromFirebase(orderId);
        if (success) {
          // Remove from local data immediately
          delete allOrders[orderId];
          delete filteredOrders[orderId];
          
          // Update display
          displayOrders(filteredOrders);
          calculateStats(allOrders);
          
          showStatus('‡∏•‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        } else {
          showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå', 'error');
        }
      } catch (error) {
        console.error('Delete error:', error);
        showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•', 'error');
      }
    }

    function calculateStats(orders) {
      if (!orders) {
        document.getElementById('totalRevenue').textContent = '0 ‡∏ö‡∏≤‡∏ó';
        document.getElementById('totalOrders').textContent = '0';
        document.getElementById('todayOrders').textContent = '0';
        document.getElementById('pendingOrders').textContent = '0';
        document.getElementById('lastUpdate').textContent = '-';
        return;
      }

      const ordersArray = Object.values(orders);
      const totalRevenue = ordersArray.reduce((sum, order) => sum + (order.totalAmount || 0), 0);
      const totalOrders = ordersArray.length;
      
      const today = new Date().toDateString();
      const todayOrders = ordersArray.filter(order => 
        new Date(order.orderDate).toDateString() === today
      ).length;

      const pendingOrders = ordersArray.filter(order => 
        (order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£') === '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'
      ).length;

      document.getElementById('totalRevenue').textContent = `${totalRevenue.toLocaleString('th-TH', { minimumFractionDigits: 2 })} ‡∏ö‡∏≤‡∏ó`;
      document.getElementById('totalOrders').textContent = totalOrders.toLocaleString('th-TH');
      document.getElementById('todayOrders').textContent = todayOrders.toLocaleString('th-TH');
      document.getElementById('pendingOrders').textContent = pendingOrders.toLocaleString('th-TH');
      document.getElementById('lastUpdate').textContent = new Date().toLocaleString('th-TH');
    }

    function refreshOrders() {
      loadOrders();
    }

    // Search and filter functions
    function handleAdminSearchKeyPress(event) {
      if (event.key === 'Enter') {
        searchAdminOrders();
      }
    }

    function searchAdminOrders() {
      const nameSearch = document.getElementById('adminSearchInput').value.trim().toLowerCase();
      const phoneSearch = document.getElementById('adminPhoneInput').value.trim().toLowerCase();
      const statusFilter = document.getElementById('statusFilter').value;

      filteredOrders = {};

      Object.entries(allOrders).forEach(([id, order]) => {
        const customerName = (order.customer?.name || '').toLowerCase();
        const customerPhone = (order.customer?.phone || '').toLowerCase();
        const orderStatus = order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£';

        const nameMatch = !nameSearch || customerName.includes(nameSearch);
        const phoneMatch = !phoneSearch || customerPhone.includes(phoneSearch);
        const statusMatch = !statusFilter || orderStatus === statusFilter;

        if (nameMatch && phoneMatch && statusMatch) {
          filteredOrders[id] = order;
        }
      });

      displayOrders(filteredOrders);
      
      const resultCount = Object.keys(filteredOrders).length;
      if (resultCount === 0 && (nameSearch || phoneSearch || statusFilter)) {
        showStatus('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤', 'error');
      } else if (nameSearch || phoneSearch || statusFilter) {
        showStatus(`‡∏û‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå ${resultCount} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'success');
      }
    }

    function filterOrders() {
      searchAdminOrders();
    }

    // Original ordering system functions
    function addItem() {
      const name = document.getElementById('productName').value.trim();
      const size = document.getElementById('productSize').value.trim();
      const qty = parseInt(document.getElementById('productQty').value);
      const price = parseFloat(document.getElementById('productPrice').value);

      if (!name || !qty || !price || qty <= 0 || price < 0) {
        showStatus('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô', 'error');
        return;
      }

      const item = {
        id: Date.now(),
        name: name,
        size: size || '',
        qty: qty,
        price: price,
        total: qty * price
      };

      items.push(item);
      updateItemList();
      clearProductForm();
      showStatus('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
    }

    function confirmRemoveItem(id) {
      if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
        removeItem(id);
      }
    }

    function removeItem(id) {
      items = items.filter(item => item.id !== id);
      updateItemList();
      showStatus('‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
    }

    function editItem(id) {
      const item = items.find(item => item.id === id);
      if (!item) return;

      // Fill form with item data
      document.getElementById('productName').value = item.name;
      document.getElementById('productSize').value = item.size || '';
      document.getElementById('productQty').value = item.qty;
      document.getElementById('productPrice').value = item.price;

      // Remove item from list temporarily
      items = items.filter(item => item.id !== id);
      updateItemList();
      
      // Scroll to form
      document.getElementById('productName').scrollIntoView({ behavior: 'smooth' });
      document.getElementById('productName').focus();
      
      showStatus('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á', 'info');
    }

    function updateItemList() {
      const itemList = document.getElementById('itemList');
      const totalQty = document.getElementById('totalQty');
      const totalPrice = document.getElementById('totalPrice');
      const cartBadge = document.getElementById('cartBadge');

      if (items.length === 0) {
        itemList.innerHTML = '<li class="text-center py-12 text-gray-500 premium-card rounded-2xl border-4 border-dashed border-gray-300"><div class="text-5xl mb-4 icon-bounce">üõí</div><p class="font-bold text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p><p class="text-base mt-2 font-medium">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå</p><div class="flex justify-center mt-4 space-x-1"><div class="w-2 h-2 bg-gray-400 rounded-full animate-pulse"></div><div class="w-2 h-2 bg-gray-500 rounded-full animate-pulse" style="animation-delay: 0.2s"></div><div class="w-2 h-2 bg-gray-600 rounded-full animate-pulse" style="animation-delay: 0.4s"></div></div></li>';
        totalQty.textContent = '0';
        totalPrice.textContent = '0.00';
        cartBadge.textContent = '0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£';
        return;
      }

      itemList.innerHTML = items.map(item => `
        <li class="premium-card p-4 md:p-6 rounded-2xl premium-shadow card-hover border-l-4 border-honey-400">
          <!-- Mobile Layout -->
          <div class="block md:hidden">
            <div class="flex items-center gap-3 mb-4">
              <div class="w-10 h-10 honey-gradient rounded-xl flex items-center justify-center premium-shadow pulse-ring flex-shrink-0">
                <span class="text-base icon-bounce">üçå</span>
              </div>
              <div class="flex-1 min-w-0">
                <div class="font-black text-base text-gray-800 truncate">
                  ${item.name}
                </div>
                ${item.size ? `<div class="text-xs text-gray-600 font-medium truncate">${item.size}</div>` : ''}
              </div>
              <div class="flex gap-2 flex-shrink-0">
                <button onclick="editItem(${item.id})" class="bg-gradient-to-r from-blue-400 to-blue-500 hover:from-blue-500 hover:to-blue-600 text-white px-2 py-2 rounded-lg text-xs font-bold transition-all duration-300 transform hover:scale-105 premium-shadow">
                  <span class="text-sm">‚úèÔ∏è</span>
                </button>
                <button onclick="confirmRemoveItem(${item.id})" class="bg-gradient-to-r from-red-400 to-red-500 hover:from-red-500 hover:to-red-600 text-white px-2 py-2 rounded-lg text-xs font-bold transition-all duration-300 transform hover:scale-105 premium-shadow">
                  <span class="text-sm">üóëÔ∏è</span>
                </button>
              </div>
            </div>
            
            <div class="bg-gradient-to-r from-gray-50 to-white p-3 rounded-xl border-2 border-gray-100">
              <div class="grid grid-cols-2 gap-3 text-sm mb-3">
                <div class="flex items-center justify-between">
                  <span class="text-gray-600 font-medium text-xs">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span>
                  <span class="font-black text-blue-600 text-base">${item.qty}</span>
                </div>
                <div class="flex items-center justify-between">
                  <span class="text-gray-600 font-medium text-xs">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢:</span>
                  <span class="font-black text-green-600 text-base">${item.price.toFixed(2)}</span>
                </div>
              </div>
              <div class="border-t border-gray-200 pt-3">
                <div class="flex items-center justify-between">
                  <span class="text-gray-700 font-bold text-sm">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
                  <span class="font-black text-green-600 text-lg">${item.total.toFixed(2)} ‡∏ö‡∏≤‡∏ó</span>
                </div>
              </div>
            </div>
          </div>

          <!-- Desktop Layout -->
          <div class="hidden md:flex justify-between items-start">
            <div class="flex-1">
              <div class="flex items-center gap-4 mb-4">
                <div class="w-12 h-12 honey-gradient rounded-2xl flex items-center justify-center premium-shadow pulse-ring">
                  <span class="text-lg icon-bounce">üçå</span>
                </div>
                <div>
                  <div class="font-black text-lg text-gray-800">
                    ${item.name}
                  </div>
                  ${item.size ? `<div class="text-sm text-gray-600 font-medium">${item.size}</div>` : ''}
                </div>
              </div>
              <div class="bg-gradient-to-r from-gray-50 to-white p-4 rounded-xl border-2 border-gray-100">
                <div class="grid grid-cols-2 gap-4 text-sm">
                  <div class="flex items-center justify-between">
                    <span class="text-gray-600 font-medium">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</span>
                    <span class="font-black text-blue-600 text-lg">${item.qty}</span>
                  </div>
                  <div class="flex items-center justify-between">
                    <span class="text-gray-600 font-medium">‡∏£‡∏≤‡∏Ñ‡∏≤/‡∏´‡∏ô‡πà‡∏ß‡∏¢:</span>
                    <span class="font-black text-green-600 text-lg">${item.price.toFixed(2)} ‡∏ö‡∏≤‡∏ó</span>
                  </div>
                </div>
              </div>
            </div>
            <div class="text-right ml-6 flex flex-col items-end gap-3">
              <div class="bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white px-4 py-3 rounded-xl premium-shadow neon-glow">
                <div class="text-xs font-bold">‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°</div>
                <div class="text-lg font-black">${item.total.toFixed(2)} ‡∏ö‡∏≤‡∏ó</div>
              </div>
              <div class="flex gap-2">
                <button onclick="editItem(${item.id})" class="bg-gradient-to-r from-blue-400 to-blue-500 hover:from-blue-500 hover:to-blue-600 text-white px-3 py-2 rounded-xl text-sm font-bold transition-all duration-500 transform hover:scale-110 premium-shadow hover:neon-glow">
                  <span class="text-base mr-1">‚úèÔ∏è</span> ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                </button>
                <button onclick="confirmRemoveItem(${item.id})" class="bg-gradient-to-r from-red-400 to-red-500 hover:from-red-500 hover:to-red-600 text-white px-3 py-2 rounded-xl text-sm font-bold transition-all duration-500 transform hover:scale-110 premium-shadow hover:neon-glow">
                  <span class="text-base mr-1">üóëÔ∏è</span> ‡∏•‡∏ö
                </button>
              </div>
            </div>
          </div>
        </li>
      `).join('');

      const totalItems = items.reduce((sum, item) => sum + item.qty, 0);
      const totalAmount = items.reduce((sum, item) => sum + item.total, 0);

      totalQty.textContent = totalItems;
      totalPrice.textContent = totalAmount.toFixed(2);
      cartBadge.textContent = `${items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
    }

    function clearProductForm() {
      document.getElementById('productName').value = '';
      document.getElementById('productSize').value = '';
      document.getElementById('productQty').value = '';
      document.getElementById('productPrice').value = '';
    }

    function confirmGenerateReceipt() {
      console.log('confirmGenerateReceipt called');
      
      const customerName = document.getElementById('customerName').value.trim();
      const customerPhone = document.getElementById('customerPhone').value.trim();
      const customerAddress = document.getElementById('customerAddress').value.trim();

      console.log('Form data:', { customerName, customerPhone, customerAddress, itemsCount: items.length });

      if (!customerName || !customerPhone || !customerAddress) {
        showStatus('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô (‡∏ä‡∏∑‡πà‡∏≠, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà)', 'error');
        return;
      }

      if (items.length === 0) {
        showStatus('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', 'error');
        return;
      }

      const totalAmount = items.reduce((sum, item) => sum + item.total, 0);
      const confirmMessage = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:\n\n‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${customerName}\n‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${customerPhone}\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ${items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£\n‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ${totalAmount.toFixed(2)} ‡∏ö‡∏≤‡∏ó\n\n‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥`;
      
      console.log('Showing confirmation dialog');
      if (confirm(confirmMessage)) {
        console.log('User confirmed, calling generateReceiptWithSave');
        generateReceiptWithSave();
      } else {
        console.log('User cancelled');
      }
    }

    async function generateReceiptWithSave() {
      console.log('generateReceiptWithSave called');
      
      const customerName = document.getElementById('customerName').value.trim();
      const customerPhone = document.getElementById('customerPhone').value.trim();
      const customerAddress = document.getElementById('customerAddress').value.trim();

      console.log('Customer data:', { customerName, customerPhone, customerAddress });
      console.log('Items:', items);

      const order = {
        customer: {
          name: customerName,
          phone: customerPhone,
          address: customerAddress
        },
        items: items,
        totalAmount: items.reduce((sum, item) => sum + item.total, 0),
        orderDate: new Date().toISOString(),
        status: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'
      };

      console.log('Order object:', order);
      showStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à...', 'info');

      try {
        console.log('Calling saveOrderToFirebase...');
        const success = await window.saveOrderToFirebase(order);
        console.log('Save result:', success);
        
        if (success) {
          console.log('Save successful, showing receipt...');
          showReceiptView({
            id: `ORD${Date.now()}`,
            ...order
          });
          
          // Clear form after successful save
          items = [];
          document.getElementById('customerName').value = '';
          document.getElementById('customerPhone').value = '';
          document.getElementById('customerAddress').value = '';
          clearProductForm();
          updateItemList();
          
          showStatus('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
        } else {
          console.log('Save failed');
          showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå', 'error');
        }
      } catch (error) {
        console.error('Error in generateReceiptWithSave:', error);
        showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ' + error.message, 'error');
      }
    }

    function confirmSaveOrder() {
      console.log('confirmSaveOrder called');
      
      const customerName = document.getElementById('customerName').value.trim();
      const customerPhone = document.getElementById('customerPhone').value.trim();
      const customerAddress = document.getElementById('customerAddress').value.trim();

      console.log('Form data:', { customerName, customerPhone, customerAddress, itemsCount: items.length });

      if (!customerName || !customerPhone || !customerAddress) {
        showStatus('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô (‡∏ä‡∏∑‡πà‡∏≠, ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£, ‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà)', 'error');
        return;
      }

      if (items.length === 0) {
        showStatus('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£', 'error');
        return;
      }

      const totalAmount = items.reduce((sum, item) => sum + item.total, 0);
      const confirmMessage = `‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:\n\n‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${customerName}\n‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£: ${customerPhone}\n‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤: ${items.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£\n‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°: ${totalAmount.toFixed(2)} ‡∏ö‡∏≤‡∏ó`;
      
      console.log('Showing confirmation dialog');
      if (confirm(confirmMessage)) {
        console.log('User confirmed, calling saveOrder');
        saveOrder();
      } else {
        console.log('User cancelled');
      }
    }

    async function saveOrder() {
      console.log('saveOrder called');
      
      const customerName = document.getElementById('customerName').value.trim();
      const customerPhone = document.getElementById('customerPhone').value.trim();
      const customerAddress = document.getElementById('customerAddress').value.trim();

      console.log('Customer data:', { customerName, customerPhone, customerAddress });
      console.log('Items:', items);

      const order = {
        customer: {
          name: customerName,
          phone: customerPhone,
          address: customerAddress
        },
        items: items,
        totalAmount: items.reduce((sum, item) => sum + item.total, 0),
        orderDate: new Date().toISOString(),
        status: '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'
      };

      console.log('Order object:', order);
      showStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå...', 'info');

      try {
        console.log('Calling saveOrderToFirebase...');
        const success = await window.saveOrderToFirebase(order);
        console.log('Save result:', success);
        
        if (success) {
          console.log('Save successful');
          orderCounter++;
          showStatus('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
          
          // Clear form after successful save
          items = [];
          document.getElementById('customerName').value = '';
          document.getElementById('customerPhone').value = '';
          document.getElementById('customerAddress').value = '';
          clearProductForm();
          updateItemList();
        } else {
          console.log('Save failed');
          showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå', 'error');
        }
      } catch (error) {
        console.error('Error in saveOrder:', error);
        showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ' + error.message, 'error');
      }
    }

    // Customer order search functionality
    async function searchOrders() {
      const searchTerm = document.getElementById('searchInput').value.trim();
      
      if (!searchTerm) {
        showStatus('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå', 'error');
        return;
      }

      showStatus('‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå...', 'info');

      try {
        const orders = await window.getOrdersFromFirebase();
        
        if (!orders || Object.keys(orders).length === 0) {
          displaySearchResults([]);
          showStatus('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö', 'error');
          return;
        }

        const filteredOrders = Object.entries(orders)
          .filter(([id, order]) => {
            const customerName = (order.customer?.name || '').toLowerCase();
            const customerPhone = (order.customer?.phone || '').toLowerCase();
            const searchLower = searchTerm.toLowerCase();
            
            return customerName.includes(searchLower) || customerPhone.includes(searchLower);
          })
          .map(([id, order]) => ({ id, ...order }));

        displaySearchResults(filteredOrders);
        
        if (filteredOrders.length === 0) {
          showStatus('‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤', 'error');
        } else {
          showStatus(`‡∏û‡∏ö‡∏≠‡∏≠‡∏£‡πå‡πÄ‡∏î‡∏≠‡∏£‡πå ${filteredOrders.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`, 'success');
        }
      } catch (error) {
        showStatus('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤', 'error');
        console.error('Search error:', error);
      }
    }

    function displaySearchResults(orders) {
      const searchResults = document.getElementById('searchResults');
      const searchResultsList = document.getElementById('searchResultsList');
      const searchCount = document.getElementById('searchCount');
      
      if (orders.length === 0) {
        searchResults.classList.add('hidden');
        return;
      }

      searchCount.textContent = `${orders.length} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
      orders.sort((a, b) => new Date(b.orderDate) - new Date(a.orderDate));

      searchResultsList.innerHTML = orders.map(order => {
        const statusColor = getStatusColor(order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£');
        const statusIcon = getStatusIcon(order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£');
        
        return `
          <div class="bg-white border border-orange-200 rounded-xl p-4 hover:border-orange-300 hover:shadow-md cursor-pointer transition-all duration-200 transform hover:scale-102" onclick="showReceiptView(${JSON.stringify(order).replace(/"/g, '&quot;')})">
            <div class="flex justify-between items-start mb-3">
              <div>
                <h3 class="font-bold text-lg text-gray-800">${order.customer?.name || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠'}</h3>
                <p class="text-sm text-gray-600 flex items-center gap-1">
                  <span>üì±</span> ${order.customer?.phone || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏‡πÄ‡∏ö‡∏≠‡∏£‡πå'}
                </p>
                <p class="text-sm text-gray-600 flex items-center gap-1">
                  <span>üõí</span> ${order.items?.length || 0} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
                </p>
              </div>
              <div class="text-right">
                <p class="font-bold text-xl text-green-600">${order.totalAmount?.toFixed(2) || '0.00'} ‡∏ö‡∏≤‡∏ó</p>
                <p class="text-xs text-gray-500">${new Date(order.orderDate).toLocaleString('th-TH')}</p>
              </div>
            </div>
            
            <div class="flex items-center justify-center pt-3 border-t border-orange-100">
              <span class="px-4 py-2 rounded-full text-sm font-bold ${statusColor} shadow-sm">
                ${statusIcon} ${order.status || '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£'}
              </span>
            </div>
          </div>
        `;
      }).join('');

      searchResults.classList.remove('hidden');
    }

    function handleSearchKeyPress(event) {
      if (event.key === 'Enter') {
        searchOrders();
      }
    }

    function clearSearch() {
      document.getElementById('searchInput').value = '';
      document.getElementById('searchResults').classList.add('hidden');
      showStatus('‡∏•‡πâ‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß', 'success');
    }

    function showStatus(message, type) {
      const statusElement = document.getElementById('statusMessage');
      statusElement.textContent = message;
      statusElement.className = `p-4 rounded-xl text-center font-semibold shadow-lg ${
        type === 'success' ? 'bg-green-100 text-green-800 border border-green-200' :
        type === 'error' ? 'bg-red-100 text-red-800 border border-red-200' :
        'bg-blue-100 text-blue-800 border border-blue-200'
      }`;
      statusElement.classList.remove('hidden');
      
      setTimeout(() => {
        statusElement.classList.add('hidden');
      }, 3000);
    }

    // Initialize
    updateItemList();
  </script>

<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'966134b4c11cee52',t:'MTc1MzY3MjQ2Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
